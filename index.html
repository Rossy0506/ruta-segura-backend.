<!DOCTYPE html>
<html>
<head>
    <title>Ruta Segura</title>
    <meta charset="UTF-8">
</head>
<body>
    <h1 style="text-align:center">Ruta Segura Activa</h1>
    <button id="btn" style="width:100%; height:100px; font-size:30px; background:red; color:white;">
         REPORTAR OPERATIVO
    </button>

    <script>
        // Funci贸n de voz
        function hablar(texto) {
            const mensaje = new SpeechSynthesisUtterance(texto);
            mensaje.lang = 'es-ES';
            window.speechSynthesis.speak(mensaje);
        }

        // Al hacer clic en el bot贸n
        document.getElementById('btn').onclick = async () => {
            hablar("Procesando reporte");
            
            try {
                const respuesta = await fetch('http://ruta-segura-backend-hz7t.onrender.com/reportar', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        tipo: "Prueba Directa",
                        lat: -6.7,
                        lng: -79.8
                    })
                });

                if (respuesta.ok) {
                    alert("隆CONECTADO! El reporte lleg贸 a Python.");
                    hablar("Reporte enviado con 茅xito");
                } else {
                    alert("El servidor respondi贸 pero con error.");
                }
            } catch (error) {
                console.error(error);
                alert("Sigue sin conectar. Revisa que la terminal negra diga 'Application startup complete'");
            }
        };
    </script>
</body>
</html>